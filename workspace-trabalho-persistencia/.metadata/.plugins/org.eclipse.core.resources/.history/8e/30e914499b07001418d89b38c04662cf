package br.com.fiap.projetohibernate.concurrency;

import org.hibernate.Session;
import org.hibernate.Transaction;

import br.com.fiap.projetohibernate.datatypes.Pedido;
import br.com.fiap.projetohibernate.datatypes.PedidoItem;
import br.com.fiap.projetohibernate.util.HibernateUtil;

public class ItemDAOImpl {

	private Session session = null;
	private Transaction transaction = null;

	public String inserirPedido(Pedido pedido) {
		
		try{
			
			// Obtemos a sessão conectando-se ao banco de dados
			session = HibernateUtil.getSessionFactory().getCurrentSession();
			
			// Abre a transação, após isso várias operações poderão ser executadas
			// e em caso de falhas a operação como inteiro é retornada ao seu estado inicial.
			transaction = session.beginTransaction();
			
			// salvamos o Pedido primeiramente.
			session.save(pedido);
			
		} catch (Exception e){
			return e.getMessage();
		}
	}
}
